import { ChatCompletionMessageParam } from "openai/resources/chat"
import { addLogEntry } from "./supabase"

export const parseOpenAIStreamingResponse = (response: string) => {
  const events = response.split("\n\n")
  let finalResponse = ""

  for (const event of events) {
    if (event.startsWith("data: [DONE]")) {
      break
    }
    if (event.startsWith("data: ")) {
      const jsonData = JSON.parse(event.slice(6))
      if (jsonData.choices && jsonData.choices[0].delta.content) {
        finalResponse += jsonData.choices[0].delta.content
      }
    }
  }
  return finalResponse
}

export const parseWebsearchResults = (
  messages: ChatCompletionMessageParam[]
):
  | {
      url: string
      content: string
    }[] => {
  const websearchMessage = messages.find(
    (msg) =>
      msg.role === "user" &&
      typeof msg.content === "string" &&
      msg.content.includes("### Potentially Relevant Websearch Results")
  )
  // console.log("websearchMessage", websearchMessage)
  // addLogEntry({
  //   type: "debug",
  //   messages,
  //   websearchMessage,
  // })

  if (!websearchMessage || typeof websearchMessage.content !== "string") {
    return []
  }

  const regex =
    /Website URL: (.*?)\n\nWebsite content:([\s\S]*?)(?=\n____|\n$)/g
  const matches = [...websearchMessage.content.matchAll(regex)]

  return matches.map((match) => ({
    url: match[1],
    content: match[2].trim(),
  }))
}

// const testMessages = [
//   {
//     role: "system",
//     content:
//       'You are an intelligent programmer, powered by GPT-4o. You are happy to help answer any questions that the user has (usually they will be about coding).\n\n1. Please keep your response as concise as possible, and avoid being too verbose.\n\n2. When the user is asking for edits to their code, please output a simplified version of the code block that highlights the changes necessary and adds comments to indicate where unchanged code has been skipped. For example:\n```language:path/to/file\n// ... existing code ...\n{{ edit_1 }}\n// ... existing code ...\n{{ edit_2 }}\n// ... existing code ...\n```\nThe user can see the entire file, so they prefer to only read the updates to the code. Often this will mean that the start/end of the file will be skipped, but that\'s okay! Rewrite the entire file only if specifically requested. Always provide a brief explanation of the updates, unless the user specifically requests only the code.\n\n3. Do not lie or make up facts.\n\n4. If a user messages you in a foreign language, please respond in that language.\n\n5. Format your response in markdown.\n\n6. When writing out new code blocks, please specify the language ID after the initial backticks, like so: \n```python\n{{ code }}\n```\n\n7. When writing out code blocks for an existing file, please also specify the file path after the initial backticks and restate the method / class your codeblock belongs to, like so:\n```language:some/other/file\nfunction AIChatHistory() {\n    ...\n    {{ code }}\n    ...\n}\n```\n\n8. If search results are provided, you should respond as if this information is known to you. Refrain from saying "I am unable to browse the internet", "I don\'t have access to the internet", or "I\'m unable to provide real-time news updates." Please always cite any links from the search results that you include in your response in markdown format.',
//   },
//   {
//     name: "potential_context",
//     role: "user",
//     content:
//       '# Inputs\n\n### Potentially Relevant Websearch Results\n\n-------\n\nWebsite URL: https://eopla.net/magazines/21402#\n\nWebsite content:\n아티클 이오스쿨 이벤트 \n\n아티클 이오스쿨 이벤트 \n\n로그인 \n\n× \n\n 반가워요 :)\n\n 로그인 해주세요!\n\n회원가입 \n\n로그인 \n\n프로필 \n\n작성한 아티클 \n\n알림 \n\n#사업전략 #운영 #프로덕트 \n\n 3년만에 450% 성장과 170억 매출, 뉴스레터 덕분이죠. \n\n 2024\\. 09\\. 25 422 \n\n2015년 설립된 Morning Brew는 핵심만을 간략히 전달하는 혁신적인 뉴스레터로 빠르게 성장했습니다. 바쁜 직장인과 젊은 층을 사로잡은 이 접근법은 마케팅, 테크, 리테일 등 다양한 분야로 확장되며 큰 성공을 거뒀고, 결국 1,000억 원이라는 높은 가치로 매각되었습니다.\n\n타일러 덴크 성공의 발판인 Morning Brew. 짧고 간결한 게 핵심이다.\n\nMorning Brew 성공의 주역 중 한 명인 Tyler Denk는 기계공학 전공자 출신이에요.\n\n코딩에 흥미를 느낀 그는 독학으로 코딩을 배워, 대학생 때 스타트업을 설립하기도 했습니다.\b 그리고 Google에서 YouTube Music의 Product Lead로 재직한 뒤, 2021년 Beehiiv를 설립했죠.\n\nBeehiiv는 설립 **3년 만**에 **1,340억원(= $100M)**의 기업 가치를 인정받았고, 2024년에는 **450%의 성장률**을 기록했습니다. 현재 **연 매출 170억원**을 달성하며, Beehiiv는 뉴스레터 플랫폼 시장의 새로운 강자로 자리잡았습니다.\n\nBeehiiv - 150,000명 이상의 발행자가 이용 중이며, 전 세계 50백만 명의 독자에게 서비스를 제공\n\n> "저희는 크리에이터들이 진정으로 원하는 것이 무엇인지 알고 있었어요. 그들은 뉴스레터 플랫폼 안에서, 단순히 글을 쓰고 보내는 것 이상을 원했죠. 성장하고, 수익을 창출하고, 자신만의 브랜드를 만들고 싶어 했습니다." \n\n---\n\n## **💎 핵심요약**\n\n---\n\n## **Q. 왜 뉴스레터 플랫폼인가요? : “** **돈이 몰리는 시장** **이기 때문이죠.”**\n\n글로벌 이메일 마케팅 시장 성장 규모. 출처 : futuremarketinsights\n\n이메일 마케팅 시장 규모는 2024년 기준 22조 660억원이며, 2034년까지 약106조 705억원 규모로 성장할 것으로 예상됩니다.   \n일간 뉴스레터 시장 규모는 2022년 기준 1조 6,302억원, 2029년까지 2조 4,258억원으로 성장이 예측된다고 하네요.  \n이 거대한 시장에서 크리에이터들이 더 많은 구독자를 확보하고, 나아가 수익화할 수 있는 방법에 대한 니즈는 끊임없이 증가하고 있죠.\n\n💡 뉴스레터 시장이 지속해서 성장하는 이유를 분석해봤습니다.\n\n1. **정보 과잉 시대, 큐레이션 필요성 증가** : 디지털 시대에 정보의 홍수 속에서 사람들은 신뢰할 수 있는 정보 소스를 찾고 있습니다. 뉴스레터는 이러한 니즈를 충족시킬 수 있는 완벽한 형태죠.\n2. **맞춤 콘텐츠 수요 증가** : 독자들은 자신의 관심사에 맞는 맞춤형 콘텐츠를 원합니다. 뉴스레터는 이러한 개인화된 경험을 제공할 수 있는 이상적인 매체입니다.\n3. **크리에이터 이코노미 부상**: 개인 창작자들이 자신의 콘텐츠로 수익을 창출하는 트렌드가 강해지고 있습니다. 뉴스레터는 이러한 크리에이터들에게 새로운 기회를 제공할 수 있죠.\n4. **여전히 막강한 이메일 영향력** : 소셜 미디어의 발달에도 불구하고, 이메일은 여전히 강력한 커뮤니케이션 도구입니다. 매일 40억 명 이상이 이메일을 사용하고 있다는 사실은 뉴스레터의 잠재력을 보여주는 중요한 지표입니다.\n\n2024년 들어서 450% 성장한 Beehiiv. 출처 : https://sacra.com/c/beehiiv/\n\nMorning Brew를 엑싯하면서 타일러는 이 시장의 가능성을 일찍이 알아챘습니다.\n\n> “대부분이 모르는 사실은, 뉴스레터는 단순히 텍스트를 전달하는 것 이상의 힘을 가졌어요. 무엇보다 이메일이라는 도구의 파급력은 여전히 강력해요. 매일 전 세계적으로 4억 명 이상의 사용자와 크리에이터들을 연결해주는 거대한 소통의 창구 입니다. 직장인들을 보세요. 다들 이메일로 업무를 주고 받잖아요?”\n\n뉴스레터 비지니스 모델의 가치를 빠르게 캐치한 그는 본질에 집중하기로 합니다. 뉴스레터가 크리에이터들에게 실제로 돈을 벌 수 있는 수단이 되게 만드는 것이었죠.\n\n뉴스레터 발행 플랫폼인 서브스택의 수익구조. 구독자당 돈을 받으라고 한다. 짜치는 구조.\n\nBeehiiv의 창립 당시, 뉴스레터 시장은 이미 포화 상태였습니다. Substack, Mailchimp 같은 대형 뉴스레터 플랫폼들이 이미 자리를 잡고 있었고 다양한 이메일 마케팅 툴도 존재했습니다.\n\n> 문제는 당시에는 뉴스레터를 수익화하는 방법도 매우 제한적이었습니다. 대부분의 뉴스레터 크리에이터들은 불규칙적인 월구독료나 소액 후원에 의존했으며 광고를 통한 수익화는 제한적이었습니다.\n> \n> 또한, 유명한 뉴스레터 크리에이터가 된다고 한들, 기존 플랫폼들이 크리에이터들에게 수익의 일정 비율을 떼어가는 구조 때문에 수익화는 더더욱 어려웠죠. 저희는 그 부분을 공략하기로 했습니다.\n\n대장 메일침프의 자리를 넘보는 Beehiiv.\n\n시장은 포화 상태였지만 기존의 뉴스레터 플랫폼들이 크리에이터의 진정한 니즈를 충족시키지 못하고 있다고 판단한 타일러는 그 문제점들을 해결할 방안을 찾기 시작했습니다.\n\n> "뉴스레터는 단순히 콘텐츠를 배포하는 도구가 아니라, 성장과 수익화를 동시에 가능하게 하는 플랫폼이 되어야 해요. COVID-19로 크리에이터 이코노미 시장이 급부상하기 시작했죠. 개인 창작자가 자신의 콘텐츠로 수익을 창출하는 트렌드가 더욱 강해지고 있었던 시기였어요. 뉴스레터 플랫폼이 이러한 크리에이터들에게 새로운 기회를 제공할 수 있다고 생각했습니다."\n\nBeehiiv는 수익 모델을 다각화하고, 광고 네트워크와 같은 기능을 추가하여 크리에이터들이 보다 쉽게 돈을 벌 수 있는 환경을 만들었습니다. 광고 수익과 구독 모델을 결합한 플랫폼을 제공하며, Substack과 차별화된 비즈니스 모델을 구축해 새로운 길을 개척해 나갔습니다.\n\n---\n\n## **2\\. Beehiiv 차별화 전략: “** **한 가지 도구로 모든 것을 해결하라** **.”**\n\nMonetize - 수익화 하라는 문구가 가장 눈에 띄는 Beehiiv의 웹사이트.\n\nBeehiiv의 강점 중 하나는 바로 모든 기능을 한 곳에서 제공하는 플랫폼이라는 점입니다.\n\n기존의 뉴스레터 플랫폼들은 대부분 콘텐츠 발행에만 초점을 맞추고 있었지만, Beehiiv는 단순한 발행 도구를 넘어 콘텐츠 생성, 성장, 수익화까지 지원하는 종합적인 솔루션을 제공합니다.\n\nBeehiiv의 대쉬보드. 포스트 / 오디언스 현황 / 성장전략 / 수익화 전략 / 디자인 / 분석 기능을 지원한다.\n\n타일러는 이를 통해 Beehiiv가 단순한 비용이 아니라 수익 창출의 도구로 인식되기를 바랐습니다. 크리에이터들이 뉴스레터를 통해 더 많은 구독자를 확보하고, 그 구독자들을 통해 직접적인 수익을 창출할 수 있도록 돕는 것이 그의 목표였죠.\n\n> "저희는 뉴스레터가 단순한 콘텐츠 전달 도구를 넘어, 실질적인 수익 창출 플랫폼이 될 수 있다고 믿었습니다."\n\n💡 Beehiiv의 3가지 차별화된 기능 :\n\n1. **유연한 디자인과 맞춤형 기능** : Substack이 제공하는 기본 템플릿과 달리, Beehiiv는 디자인 커스터마이징 기능을 통해 크리에이터들이 자신만의 브랜드를 구축할 수 있도록 돕습니다. 크리에이터들은 폰트, 색상, 레이아웃 등을 자유롭게 설정하여 개성 있는 뉴스레터를 만들 수 있습니다.\n2. **추천 시스템 내장** : Morning Brew의 성공 비결 중 하나였던 추천 시스템을 Beehiiv에도 도입했습니다. 이를 통해 구독자들이 다른 사람들에게 뉴스레터를 추천하도록 유도하며, 자연스럽게 구독자 수를 늘릴 수 있는 구조를 제공합니다. 추천 시스템은 크리에이터가 자신의 콘텐츠를 보다 넓은 범위로 확산할 수 있는 강력한 도구로 작용합니다.\n3. **광고 네트워크와 수익화 모델** : Beehiiv는 광고 네트워크를 통해 크리에이터들이 광고주와 직접 연결될 수 있도록 지원합니다. 이 외에도 유료 구독 모델을 제공하여 크리에이터들이 콘텐츠를 통해 수익을 창출할 수 있는 다양한 방법을 제시합니다. 중요한 것은, Beehiiv는 구독료나 광고 수익에서 수수료를 받지 않는다는 점입니다. 이는 Substack과의 큰 차별점 중 하나이며, 많은 크리에이터들이 Beehiiv를 선택하는 이유가 되었습니다.\n\n---\n\n## **3\\. Beehiiv 성공 전략 1: “** **수익 모델** **을** **제공** **해라."**\n\nBeehiiv에서 모집하는 광고주 지원 화면. 적극적인 광고주 모집하고 있다.\n\n대부분의 플랫폼은 오롯이 광고주 ↔ 크리에이터의 중계 역할을 하며 수익을 얻습니다. Beehiiv가 기존 플랫폼들과 차별화되는 가장 큰 지점은 바로 ‘중계 이외의 다양한 수익 모델을 확보’했다는 것입니다.\n\n## **3.1 수익 구조의** **다양성**\n\n실제 Beehiiv로 발행된 뉴스레터. 중간에 스폰서 광고를 붙일 수 있다.\n\n전통적인 멤버쉽 제도. 흔하지만 크리에이터와 고객간, 강력한 유대를 형성할 수 있다.\n\n뉴스레터 중간에 게재하는 스폰서쉽 광고제도. 광고주와 연결해준다.\n\n> "저희는 크리에이터들에게 다양한 선택지를 제공합니다. 유료 구독, 광고, 스폰서십, 제휴 마케팅 등 자신에게 맞는 방식으로 수익을 창출할 수 있죠. 한 가지 방식에 얽매이지 않아요."\n\n💡 이러한 접근법의 장점은 다음과 같습니다:\n\n1. **유연성**: 뉴스레터의 성격과 독자층에 맞는 수익화 방식 선택 가능\n2. **리스크 분산**: 여러 수익원을 통해 안정적인 수입 창출\n3. **성장 가능성**: 뉴스레터의 규모와 성장에 따라 수익 모델 조정 가능\n\n## **3.2 합리적인** **고정 요금**\n\nBeehiiv의 Pricing 화면을 번역한 캡쳐본. 구독자 2,500명 까지는 무료로 이용 가능하다.\n\n> "저희는 크리에이터 수익에서 이윤을 추구하지 않습니다. 대신 합리적인 고정 요금을 받죠. 이는 크리에이터에게 더 많은 수익을 가져갈 수 있게 해줍니다."\n\n💡 이러한 고정 요금 구조가 주는 효과는 다음과 같습니다:\n\n1. **예측 가능성**: 크리에이터들이 비용을 쉽게 예측하고 관리할 수 있음.\n2. **강력한 동기 부여** : 수익이 증가할수록 더 많은 이익을 가져갈 수 있음.\n3. **낮은 진입 장벽** : 저렴한 시작 요금으로 신규 크리에이터들의 진입 유도\n\nBeehiiv의 Boosts Market. 뉴스레터 크리에이터들이 구독자를 늘리고 수익을 창출할 수 있도록 돕는 기능 제공.\n\nBeehiiv의 수익 모델은 \'크리에이터 중심\'이라는 그들의 핵심 가치를 잘 반영하고 있습니다. 크리에이터들의 다양한 니즈와 상황을 고려한 유연한 비즈니스 모델은 높은 만족도와 충성도로 이어졌습니다.\n\n> "우리의 성공은 크리에이터들의 성공과 직결됩니다. 그들이 더 많은 수익을 올릴수록, 우리도 함께 성장합니다."\n\n 💡Beehiiv의 Boost 제도가 궁금하시다면? → 클릭\n\n---\n\n## **4\\. Beehiiv 성공 전략2 : “고객의** **피드백을 수용** **하고** **빠르게 개선** **하라.”**\n\n구독자 1명당 수익을 벌 수 있는 boosts marketplace. Beehiiv의 수익화 구조가 다양하다.\n\nBeehiiv의 가장 큰 성공 요인은 **빠른 실행력과 고객(크리에이터) 중심의 혁신**이라고 할 수 있습니다.\n\n> 저희는 항상 고객의 피드백을 빠르게 수렴하고, 이를 바탕으로 플랫폼을 개선해 나갔습니다. 이 과정에서 중요한 것은 단순히 빠르게 기능을 추가하는 것이 아니라, 고객들이 실제로 필요로 하는 것에 집중했다는 점입니다.\n\nBeehiiv는 고객의 니즈를 해결하는 것을 최우선 과제로 삼고, 그 과정에서 빠른 실행력을 보여주었습니다. 이러한 속도는 단순히 기술적 혁신을 의미하는 것이 아니라, 고객의 신뢰를 쌓는 중요한 전략이었습니다.\n\n## **4.1 Beehiiv의** **제품주도성장** **: Product-Led Growth(** **PLG** **)**\n\n 돈 좀 그만보내라는 유저의 포스팅. 결국 고객이 돈을 벌어야 플랫폼은 성장한다. \n\nBeehiiv 성장 중심에는 **제품 주도 성장(Product-Led Growth, PLG)**이 있습니다. 이 접근법은 제품 자체를 주요 성장 동력으로 활용하는 것으로, Beehiiv의 성장을 이끈 엔진입니다.\n\nBeehiiv로 수익을 거둔 유저의 트위터 화면. 자랑이 곧 고객 유입이 된다.\n\n> "저희는 **제품이 스스로 말하게 합니다**. 사용자들이 제품을 경험하고, 그 가치를 직접 느끼게 하는 것이 최고의 마케팅이라고 믿습니다."\n\n💡 Beehiiv의 PLG(=제품 주도 성장) 전략은 아래 요소로 구성됩니다:\n\n1. **프리미엄 모델**: Beehiiv는 기본 기능을 무료로 제공하며, 고급 기능은 유료로 제공합니다. 이를 통해 사용자들이 부담 없이 제품을 경험할 수 있게 합니다.\n2. **직관적인 사용자 경험**: Beehiiv는 복잡한 기능을 직관적인 인터페이스로 제공합니다. 이는 사용자들이 쉽게 제품의 가치를 경험할 수 있게 해줍니다.\n3. **온보딩 프로세스**: 새로운 사용자들을 위해 온보딩 프로세스를 제공합니다. 이는 사용자들이 빠르게 제품에 적응하고 가치를 발견할 수 있게 돕습니다.\n4. **튜토리얼 시스템**: Beehiiv는 제품 사용 중에 팁과 가이드를 제공합니다. 이를 통해 사용자들이 더 많은 기능을 활용할 수 있도록 유도합니다.\n5. **바이럴 루프**: Beehiiv를 통해 발송된 뉴스레터에는 \'Powered by Beehiiv\' 배지가 포함됩니다. 이는 자연스러운 바이럴 마케팅 효과를 만들어냅니다.\n\n종종 열리는 Beehiiv의 웨비나. 잦은 웨비나를 통해 고객 친화적임을 알 수 있다.\n\n> "**저희의 가장 큰 영업사원은 바로 저희 제품**입니다. 만족한 사용자가 다른 크리에이터에게 Beehiiv를 추천하는 것보다 더 강력한 마케팅은 없죠."\n\n💡 Beehiiv의 **PLG(=제품 주도 성장)** 전략의 **효과** :\n\n1. **높은 전환율** : 무료 사용자의 유료 전환율이 업계 평균의 2배에 달합니다.\n2. **낮은 고객 획득 비용** : Beehiiv의 고객 획득 비용(CAC)은 경쟁사 대비 40% 낮습니다.\n3. **빠른 사용자 증가** : 매월 평균 20%의 신규 사용자 증가율을 기록하고 있습니다.\n4. **높은 고객 생애 가치** : Beehiiv 사용자들의 평균 고객 생애 가치(LTV)는 지속적으로 증가하고 있습니다.\n\n유저의 포스팅이 바이럴 마케팅 효과를 낸다. 핵심 원동력은 성장 & 수익화 덕분.\n\nBeehiiv의 PLG 전략은 \'**제품이 곧 마케팅이다.**\'라는 철학을 보여줍니다. 뛰어난 제품 경험이 자연스럽게 입소문을 타고 새로운 사용자를 유치하는 선순환을 만들어내는 것이죠.\n\n이러한 접근법은 전통적인 마케팅 방식에 의존하지 않고도 빠른 성장을 가능하게 했습니다. 또한, 제품 개선에 대한 지속적인 투자가 곧 마케팅 효과로 이어지는 구조를 만들어냈죠.\n\n💡제품주도성장(PLG)에 대해 자세히 알고 싶으시다면? → 링크\n\n## **4.2 속도 : “식상한 소리지만,** **빨리 실행하고 지속적으로 혁신** **하라.”**\n\n빠르게 출시하는 비하이브 기능들. 올해도 5가지 이상이 출시 되었다.\n\n"저희는 완벽을 기다리지 않습니다. **빠르게 만들고, 출시하고, 개선**합니다. 이것이 Beehiiv가 경쟁사보다 항상 한 발 앞서 나갈 수 있는 비결이죠."\n\n💡 타일러의 철학은 다음과 같은 결과를 가져왔습니다:\n\n1. **시장 경쟁력 우위** : Beehiiv는 경쟁사들이 몇 달 걸릴 기능을 몇 주 만에 출시합니다. 예를 들어, AI 기반 콘텐츠 추천 기능을 경쟁사보다 3개월 먼저 선보였습니다.\n2. **고객 만족도 상승** : Beehiiv는 사용자 피드백을 바탕으로 빠른 업데이트 주기를 유지합니다. 평균적으로 2주마다 새로운 기능이나 개선사항을 릴리즈합니다.\n3. **빠른 트렌드 대응**: Beehiiv는 새로운 뉴스레터 트렌드에 신속하게 대응하는 기능을 개발합니다. 예를 들어, 오디오 뉴스레터 트렌드가 부상하자 한 달 만에 관련 기능을 추가했습니다.\n\n> 저희의 빠른 실행 능력은 Beehiiv가 시장에서 빠르게 입지를 다지는 데 큰 역할을 했습니다. 그러나 속도만으로는 충분하지 않아요. Beehiiv의 또 다른 성공 비결은 **철저한 고객 중심 접근법**이죠.\n\n## **4.3 고객 중심 : “진부한 소리지만,** **고객의 소리에 귀를 기울여야 한다** **.”**\n\n고객의 소리를 듣는 타일러. ARR(=연간 반복 매출) 자랑이다.\n\n타일러는 Beehiiv 고객 중심 접근법을 다음과 같이 설명합니다.\n\n> "**저희는 매일 크리에이터들과 소통합니다**. 그들의 고민, 니즈, 아이디어를 듣고 이를 제품에 반영하죠. Beehiiv는 크리에이터들과 함께 성장하는 플랫폼입니다."\n\n💡 이러한 접근법의 결과는 다음과 같습니다:\n\n1. **맞춤형 기능 개발**: Beehiiv는 크리에이터들의 실제 니즈에 기반한 기능을 개발합니다. 예를 들어, 많은 크리에이터들이 요청한 멀티 언어 지원 기능을 개발하여 글로벌 독자층 확대를 지원했습니다.\n2. **높은 고객 만족도** : 사용자들의 의견이 실제로 제품에 반영되는 것을 경험한 크리에이터들의 만족도가 높아졌습니다. Beehiiv의 고객 만족도 점수는 업계 평균보다 30% 높습니다.\n3. **입소문 효과** : 만족한 사용자들이 자발적으로 Beehiiv를 추천하면서 organic growth(=자연 유입)가 증가했습니다. Beehiiv의 신규 고객 중 40%가 기존 사용자 추천으로 유입됩니다.\n\n> “저희는 플랫폼을 개발하면서 끊임없이 고객들과 소통하며, 그들의 요구를 신속하게 반영해요.  \n> 예를 들어, 한 크리에이터가 특정 기능이 필요하다고 요청하면, 그 기능을 빠르게 추가하거나 대안을 제시하여 고객이 플랫폼에 만족하도록 했습니다.  \n> 이러한 빠른 피드백 덕분에 Beehiiv가 시장에서 빠르게 자리 잡을 수 있었다고 생각해요.  \n> **저희의 목표는 단순히 빠르게 움직이는 것이 아니에요. 고객이 원하는 방향으로 빠르게 움직이는 것이죠.**"\n\n---\n\n## **5\\. Beehiiv의 성공 전략 3 : “** **커뮤니티로 소통** **하라.”**\n\n> "Beehiiv의 성장에서 브랜드 마케팅과 커뮤니티 중심 전략이 큰 역할을 했어요. 저희는 **고객을 단순한 이용자가 아닌 파트너**로 봤죠. 이 방식이 성장 전략의 핵심이라고 생각합니다. “\n\n유료 회원을 위한 Beehiiv의 슬랙 커뮤니티. 유료 회원에게만 링크가 전달 된다.\n\n> “저희는 플랫폼 제공을 넘어 **커뮤니티 내 상호작용을 촉진**하려고 해요. 뉴스레터 크리에이터들을 위한 Slack 커뮤니티를 만들어 **서로 도움을 주고받을 수 있게 했죠**. 덕분에 Beehiiv가 단순한 도구가 아닌, 크**리에이터들의 비즈니스 성장을 돕는 파트너**라는 인식을 심어줄 수 있었어요.\n\n뉴비와 수익을 못 거두는 유저를 위한 웨비나. 과거 웨비나도 제공한다.\n\n> “**마케팅에서도 크리에이터들이 주인공이 되게 했어요**. 그들의 성공 사례를 강조함으로써 잠재 사용자들에게 강력한 동기를 제공했죠. 이 전략으로 고객들이 Beehiiv의 성공에 자연스럽게 공감 하였고, 플랫폼에 대한 신뢰도 높아졌습니다.”\n\n홈페이지, 영상, 이미지 등 Beehiiv 계정으로 나가는 모든 요소에 일관된 아이덴티티를 심는 게 보인다.\n\n> “브랜드 디자인에도 많은 노력을 기울였어요. 로고부터 웹사이트까지, 모든 면에서 일관된 브랜드 아이덴티티를 유지하려 했죠.  \n> 고객들이 일관성 있는 사용자 경험(=UX)을 느끼게 하고 싶었어요. 이러한 접근 방식들이 Beehiiv의 지속적인 성장에 큰 도움이 되었어요.  \n> **고객들은 자신이 단순한 사용자 이상의 존재라고 느끼게 되고, 더 큰 애정을 가지고 Beehiiv를 사용하게 된다고 믿습니다.**"\n\n슬랙으로 소통하는 유저들. 그리고 이를 트위터에 게재하면서 선순환이 지속해서 발생한다.\n\n💡 Beehiiv **커뮤니티를 통해 고객이 얻는 것**:\n\n1. **뉴스레터 운영 전략** : 탁월한 뉴스레터 제작을 위한 핵심 전략과 노하우 공유하기\n2. **마케팅 전략** : 아이디어를 나누고 상호 홍보 방안 모색하기\n3. **네트워크** : 커뮤니티 내 유용한 인맥 쌓기\n4. **인사이트** : 디자인 인사이트를 공유하고 피드백 주고받기\n5. **문제 해결** : 전문가의 조력으로 문제 해결하기\n6. **소속감** : 서로의 성과를 축하하고 성장의 순간을 함께 기념하기\n\n---\n\n## **📌 결론**\n\nBeehiiv는 **타겟을 뉴스레터를 발행하는 크리에이터**로 명확히 잡았습니다. 이들에게 정말 필요한 것이 무엇인지 깊이 이해하고, 그에 **맞춘 솔루션을 제공**했죠. **쉬운 사용성, 맞춤형 디자인, 다양한 수익화 옵션** 등이 바로 그것입니다.  \n  \n또한 Beehiiv의 **빠른 실행력**도 중요한 역할을 했습니다. **제품 주도 개발 전략(PLG)**을 통해 **신속하게 출시**하고, 고객 **피드백**을 **즉시 반영**하는 cycle을 만들었죠. 이런 접근 방식 덕분에 **시장 변화에 발 빠르게 대응**할 수 있었습니다  \n  \nBeehiiv는 또한 뉴스레터와 크리에이터 이코노미 시장의 성장을 정확히 포착했습니다. 이 통찰력을 바탕으로 한 전략이 Beehiiv의 빠른 성장을 이끌었다고 볼 수 있습니다.  \n  \n결국 Beehiiv의 사례는 치열한 디지털 시장에서 성공하려면 **고객 중심 전략**과 **빠른 실행력이 핵심**이라는 점을 잘 보여줍니다.  \n이는 뉴스레터 산업뿐만 아니라, 급변하는 디지털 경제에서 새로운 기업들이 성공할 수 있는 방법에 대한 좋은 본보기가 될 것 같습니다.\n\n---\n\n##   **📌 엉클잡스 커뮤니티를 개설했습니다!**\n\n실행만큼 강력한 성공의 열쇠는 없습니다.  \n라일리 브라운의 성공에서 배운 교훈을 바탕으로, 저도 여러분과 함께 성장할 수 있는 무료 커뮤니티를 개설했습니다. 이 커뮤니티에서 가치 있는 정보를 제공해 드릴 예정입니다.\n\n1. **실제 업무에 바로 적용 가능한 툴 추천**\n2. **해외 성공 사례 케이스 소개**\n3. **AI 및 자동화 관련 자료 제공**\n\n**"시간은 돈입니다."**  \n  \n여러분의 귀중한 시간을 아껴드리기 위해 더 나은 정보를 제공하며, 여러분의 성장을 돕겠습니다. **커뮤니티에서 함께 지식을 확장하고 더 큰 성과를 만들어가요!**\n\n---\n\n**엉클잡스 스레드** : <https://www.threads.net/@unclejobs.ai>\n\n**엉클잡스 오픈채팅방** : <https://open.kakao.com/o/grJDbcOg>\n\n  \n1 \n\n 링크 복사 \n\n  \n엉클잡스 코트렌더  · CEO \n\n비즈레터를 발행합니다.\n\n팔로우 🙌 커피챗 \n\n 엉클잡스 님이 작성한 다른 아티클 \n\n더보기 \n\nAI에 ‘공감’을 더해야 매월 1억 7천만원을 벌 수 있습니다. 자동화 툴로 30일 동안 1억을 버는 게 가능할까요? \n\n 댓글 0 \n\n등록 \n\n 댓글이 없습니다.\n\n이번주 인기 아티클\n\n \\# 마인드셋  Series A 가기 전, 우리 팀이 준비해야 하는 3가지. 1️⃣ 첫번째, 매출보다 중요한 예측성.한국과 미국을 막론하고 Series A 투자자들이 원하는 걸 한 마디로 정리하면, 난 그것을 예측성(Predictability)라고 생각한다. 여기서 내가 얘기하는 예측성이란 팀이 내재화한 성장 예측성인데, 과거 지표를 기반... \n\n Peter Shin  500 Global  3일 전 \n\n Peter Shin  3일 전 \n\n \\# 사업전략  \\# 마인드셋  \\# 트렌드  꼰대의 몰락, 리더의 시대가 온다. < 시대는 변했고 유연하지 않으면 도태될 수 밖에 없습니다.>세상은 빠르게 변하고 있습니다. 그럼에도 변하지 않는 것이 하나 있으니, 바로 ‘꼰대’입니다. 우리는 어디서나 꼰대를 만날 수 있습니다. 회사, 모임, 심지어 가족 안에서도! 꼰대는 시대를 거... \n\n 디오니소스  디오니소스 | Product Owner  3일 전 \n\n 디오니소스  Product Owner  3일 전 \n\n \\# MVP검증  \\# 사업전략  \\# 마인드셋  미스터 비스트의 내부 문서가 유출되었습니다 전세계에서 가장 많은 구독자를 가지고 있는 유튜버가 팀에게만 공유하는 내부 문서가 공개 되었습니다. 유튜브 바이럴의 핵심은 무엇인지, 어떤 지표를 가장 중요하게 생각해야 하는지, 회사의 비젼과 목표는 무엇인지가 적혀 있어요. 공식적으로 공개한 건 아니고, 내부 직... \n\n 파운더 스토리  파운더 스토리 | CEO  7일 전 \n\n 파운더 스토리  CEO  7일 전 \n\n 인기 아티클 더보기 (3/9) \n\n추천 아티클\n\n \\# 마인드셋  \\# 커리어  \\# 기타  최소 주 70시간 몰입하지 않으면 인생은 절대 바뀌지 않는다 대부분의 사람들은 물질적인 성공을 원한다. 뷰가 좋은 큰 집, 남들이 쳐다보는 비싼 차, 태가 나는 명품 옷, 그리고 내 가족, 주변 사람들을 위해 맛있고 건강한 음식을 마음껏 사줄 수 있는 경제적인 자유. 하지만 대부분 사람들은 소위 “아가리 열정”이다. 성... \n\n 최현일  페오펫  2년 이하 전 \n\n 최현일  2년 이하 전 \n\n \\# 마인드셋  \\# 커리어  \\# 기타  ‘일 잘한다\' 칭찬 받는 사람들의 공통점 “저 친구 일을 어째 저렇게 잘하지?”“와… 저런 발상은 어떻게 나오지?”“짧은 시간 안에 저걸 다 어떻게 했지??”일하면서 이런 생각이 저절로 들게 하는 사람, 한 번쯤 만나보셨을 것입니다. 그럴 때마다 ‘난 멀었어…’ \'난 부족해\'를 스스로에게 되뇌이며 좌절하... \n\n 이세종 Konrad Lee  fireside | 전략 기획자  약 2년 전 \n\n 이세종 Konrad Lee  전략 기획자  약 2년 전 \n\n \\# 운영  \\# 마인드셋  \\# 커리어  스타트업에서 핵심인재는 떠나게 되어 있다. < 핵심인재의 기준이 잘못정해져 있다?...>핵심인재를 선정할 때 가장 잘못평가되는 척도가 있는데 "히스토리"와 "업무독점"에 대한 부분입니다.이 선정 기준에는 C-level, 초기멤버, 오래 일한 사람 등등 해당 인원들이 포함되는 경우가 많습니다. 서... \n\n 디오니소스  디오니소스 | Product Owner  7달 전 \n\n 디오니소스  Product Owner  7달 전 \n\n 더보기 \n\n엉클잡스 코트렌더  · CEO \n\n비즈레터를 발행합니다.\n\n팔로우 🙌 커피챗 \n\n 엉클잡스 님이 작성한 다른 아티클 \n\n더보기 \n\nAI에 ‘공감’을 더해야 매월 1억 7천만원을 벌 수 있습니다. 자동화 툴로 30일 동안 1억을 버는 게 가능할까요? \n\n1 \n\n 0\n\n이용약관 개인정보처리방침 채용문의 \n\n페이스북 유튜브 \n\n(주)이오스튜디오 \n\n 대표이사 : 김태용 | 사업자 번호 : 501-87-01653 | 통신판매신고번호 : 제 2021-서울강남-00951호  \n 대표번호 : 02-3442-6929 | 주소 : 서울시 강남구 논현로167길 12, B1 | © EO STUDIO all rights reserved\n\n고객센터\n\n 평일 오전 10시 \\~ 오후 6시, 채널톡 운영  \n**제휴 문의** : partner@eoeoeo.net\n\nEO STUDIO\n\nEntrepreneurship & Opportunities \n\n유튜브 아이콘 페이스북 아이콘 \n\n (주)이오스튜디오 대표이사 : 김태용 | 사업자 번호 : 501-87-01653 통신판매신고번호 : 제 2021-서울강남-00951호 | 대표번호 :  \n 02-3442-692 | 주소 : 서울시 강남구 논현로167길 12, B1\n\n© EO STUDIO all rights reserved \n____\nWebsite URL: https://andrewchen.com/retention-is-king/\n\nWebsite content:\n# Andrew Chen Archives \n\nSubscribe · Featured ·Recent ·The Cold Start Problem 📘 \n\nDear readers, I have moved to Substack and I will be writing here from now on:  \n 👉 andrewchen.substack.com  \nIn the meantime, I will leave andrewchen.com up for posterity. Enjoy!\n\n## Retention is King (Guest Post)\n\n_This is a guest post by a friend of mine on retention. Jamie Quint is Managing Partner of Quint Growth, a full-service growth consultancy that works with companies like Twitch and Hipmunk. Previously, he was the PM of Growth at Swipely and a Y Combinator alum. -Andrew_\n\n---\n\n**Jamie Quint:**  \nThere are too many companies asking, “How do we acquire more users?” that should instead be asking “How do we get better at keeping the users we already have?”.\n\nIts easy when approaching the problem of growth to think that you just need to get more users, after all that seems to be the very definition of growth. However, if you take a step back though and think about growth as the maximization of user-weeks over time, it quickly becomes apparent that focusing on retention has a much larger effect than topline growth. This is also much more of a sustainable growth mindset. Rapid user growth followed by rapid user attrition is an indicator of unsustainable growth. Strong retention of users over time is a good indicator of product-market fit, something you’re hopefully looking to achieve anyway.\n\n## Viral Factor and Retention\n\nAt a high level, retention is more important than virality because if your users don’t stick around they are not able to invite others to your product over an extended period of time. If you have high retention and no virality you will sustainably grow your user-base over time. If you have high virality and no retention you will not. Between these two extremes it gets a bit more complicated. In order to explain in detail we first need to review a couple of terms: viral factor and retention.\n\nIt will help as you follow this post to use our in-house growth model to play with the numbers yourself, the graphs we reference later on in this post are derived from it.\n\n**Viral Factor**  \nThis describes the growth rate of a site or app based on invitations from existing users of the service. This is often called k factor.\n\ni = number of invites sent by each customer  \nc = conversion rate of those invites (#signups/#invites)  \nk = i \\* c\n\nViral factor on a weekly basis usually looks something like the graph below. This varies for different products, but I’ve seen this shape again and again across the products we consult on. It is front-loaded like this for three reasons:\n\n   1. _The effectiveness of onboarding invitation flows._  \n   Onboarding is one of the few times you have a high level of user attention towards completing a specific goal (signup) and when you instruct users to invite others they often will without thinking much about it.\n\n   1. _Users’ level of excitement._  \n   Humans are most excited by new things, this applies to internet products as well. The excitement users get when trying a new product leads them to share more, but this sharing tapers off as product becomes normal in their everyday lives.\n\n1. _Low invite saturation of users networks._  \nWhen a user first starts using a product they know many more people that don’t use the product than do use it. Over time they share your product with others they know. Eventually, even a user who is very passionate about your product has nobody left to share it with that hasn’t already heard about it leading to lower virality as time goes on. This can also be an issue if your company grows very large, but that is a good problem to have.\n\nScreenshot 2014-05-15 16.55.26\n\n**Retention**  \nThis is the number of users that stick around from one time period to another. There are two ways to express retention, overall retention and week-to-week retention:\n\n   1. _Overall Retention_  \n   Overall retention is cumulative over time. If you have 30% overall retention in Week 3 it means that 30% of your users who started at the beginning of Week 1 are still around in Week 3\\. This is how companies normally express retention when discussing it internally.\n\n1. _Week-to-Week Retention_  \nFor growth purposes its often useful to look at retention on a week-to-week basis instead. Week-to-week retention is how many users move from one week to the next. If Week 2 has 40% overall retention and Week 3 has 30% overall retention than our week-to-week retention from Week 2 to Week 3 is 75%. If week-to-week retention is below 100% it means we’re still losing users.\n\nRetention on a week-to-week basis usually looks something like the curve below. It is lowest from the first week to the second week and approaches 100% as time goes on.\n\nScreenshot 2014-05-15 16.55.20\n\n## Why is retention so important?\n\nIn order for virality to be more important than retention your viral factor must be greater than your overall retention up to that point in time. We’ll prove this mathematically later in this post. The math is hard to simplify exactly, but there is a basic rule you can follow which approximates it. If you take only one thing away from this post it should be this:\n\n_**Do not focus on improving virality unless your overall retention is stable, not continuing decrease after some reasonable period of time.**_\n\nTo help illustrate this, lets look at a few examples:\n\n   1. _Your product has a very high immediate viral factor._If your product is front-loaded with invites that are sent out and accepted at a high enough rate, it is possible to achieve an immediate k > 1 viral factor. In this case, if your invites have an acceptance rate that is quick enough, your monthly active user numbers will continue to grow even if you have zero retention past the first-use of your app/site. Growth of the high virality, low retention type is almost always unsustainable as the viral loops being exploited to attain quick k > 1 virality eventually expire. This has been the downfall of many companies that appeared to grow fast, raised a lot of money on that growth, then quickly died. Like Viddy…viddy\n\nViddy growth model with viral channels working looks like this.\n\nViddy growth model with viral channels broken looks like this.\n\n   1. _Your overall retention is high and decreases slowly as time goes on, but you have strong virality._In this case, products actually do see long term benefit from focusing on increased virality, but it’s often a false signal. Its only worth focusing on virality if you think you can improve virality more than overall retention. If you switch focus too early it will lead to sub-par growth metrics. This is because the compounding effects of retention improvement are much stronger than those of virality improvement.We can illustrate this easily with our retention/virality simulator and setting week-to-week retention and virality to be equal. We can then measure the effect of proportional changes to one of the other in terms of number of users that we have at some point in the future. In the real world virality is not likely to ever be equal to week-to-week retention, but for purposes of this example please disregard that as it helps illustrate our point in the clearest way possible.  \n   Base Case – Equal Virality and Retention: \\~88k users total in Week 7, 44k from retention and 44k from virality as seen in the stacked bar chart.  \n   20% Increased Week 1 Virality: \\~110k users total in Week 7, 53k from retention and 57k from virality.  \n   20% Increased Week 1 Retention: \\~125k users total in Week 7, 65k from retention and 60k from virality.  \n   As you can see here, changes in retention have long term effects that have a greater effect than equivalent changes in virality.\n\n1. _Your overall retention is high and stable._If you have maximized your retention to the point where you think you can increase virality more than overall retention, even accounting for the compounding effects of retention, then it makes sense to focus on virality.\n\n## Prove It!\n\nIt’s easy to model growth in Excel and there are some great models that have been shared online to help do this. The one I use is available for download at <http://bit.ly/growthmodel>. It’s a slightly modified version of this great one from Rahul at Rapportive. It will give you a nice overview of how you can expect to grow if you plug in some numbers. From a user accounting perspective this is great, but its a bit hard to conceptualize how growth actually works by looking at it that way. To get a bit of a different perspective, building a tree to see exactly where users that exist in a given week come from is quite helpful.\n\nIn the tree below _w0_ represents some set of users that start at time 0\\. Each level of the tree is a week in time. At each subsequent level you get users that stick around from retention or are invited via user virality. The number of users at a given node is just the product of all the nodes leading to that point. The coefficients represent the viral and retention factors over time, _v2_ is the viral coefficient in week 2 from the above virality graph, _r3_ is the retention coefficient in week 3 from the above retention graph, etc.\n\nScreenshot 2014-05-13 17.24.01\n\nThe number of users at any given level can be simplified into a recursive equation.\n\nScreenshot 2014-05-13 17.15.28\n\nAs you can see, this matches exactly what we saw in the tree graph above. The leading viral factor (current virality vi) matters relative to overall retention (trailing product of rn‘s).\n\n## Visualizing Retention and Virality\n\nFor the client work that we do at Quint Growth we built a tool to plug in numbers and visualize the retention/virality tree. Its the same tool we mentioned in the beginning of the post and used in Viddy example above. We’ve found it incredibly useful for visualizing how much more important retention is than virality (and the few cases in which it is not). We’ve made it available at http://quintgrowth.com/growthmodel.html and hope you find it as useful as we do!\n\nSpecial thanks to Isaac Hodes for help with the d3 visualizations for the retention/virality visualizer.\n\n**PS. Get new updates/analysis on tech and startups** \n\nI write a high-quality, weekly newsletter covering what\'s happening in Silicon Valley, focused on startups, marketing, and mobile.\n\nLeave this field empty if you\'re human: \n\nViews expressed in “content” (including posts, podcasts, videos) linked on this website or posted in social media and other platforms (collectively, “content distribution outlets”) are my own and are not the views of AH Capital Management, L.L.C. (“a16z”) or its respective affiliates. AH Capital Management is an investment adviser registered with the Securities and Exchange Commission. Registration as an investment adviser does not imply any special skill or training. The posts are not directed to any investors or potential investors, and do not constitute an offer to sell -- or a solicitation of an offer to buy -- any securities, and may not be used or relied upon in evaluating the merits of any investment.\n\nThe content should not be construed as or relied upon in any manner as investment, legal, tax, or other advice. You should consult your own advisers as to legal, business, tax, and other related matters concerning any investment. Any projections, estimates, forecasts, targets, prospects and/or opinions expressed in these materials are subject to change without notice and may differ or be contrary to opinions expressed by others. Any charts provided here are for informational purposes only, and should not be relied upon when making any investment decision. Certain information contained in here has been obtained from third-party sources. While taken from sources believed to be reliable, I have not independently verified such information and makes no representations about the enduring accuracy of the information or its appropriateness for a given situation. The content speaks only as of the date indicated. \n\nUnder no circumstances should any posts or other information provided on this website -- or on associated content distribution outlets -- be construed as an offer soliciting the purchase or sale of any security or interest in any pooled investment vehicle sponsored, discussed, or mentioned by a16z personnel. Nor should it be construed as an offer to provide investment advisory services; an offer to invest in an a16z-managed pooled investment vehicle will be made separately and only by means of the confidential offering documents of the specific pooled investment vehicles -- which should be read in their entirety, and only to those who, among other requirements, meet certain qualifications under federal securities laws. Such investors, defined as accredited investors and qualified purchasers, are generally deemed capable of evaluating the merits and risks of prospective investments and financial matters. There can be no assurances that a16z’s investment objectives will be achieved or investment strategies will be successful. Any investment in a vehicle managed by a16z involves a high degree of risk including the risk that the entire amount invested is lost. Any investments or portfolio companies mentioned, referred to, or described are not representative of all investments in vehicles managed by a16z and there can be no assurance that the investments will be profitable or that other investments made in the future will have similar characteristics or results. A list of investments made by funds managed by a16z is available at https://a16z.com/investments/. Excluded from this list are investments for which the issuer has not provided permission for a16z to disclose publicly as well as unannounced investments in publicly traded digital assets. Past results of Andreessen Horowitz’s investments, pooled investment vehicles, or investment strategies are not necessarily indicative of future results. Please see <https://a16z.com/disclosures> for additional important information.\n\nLeave this field empty if you\'re human: \n  \n  \nFollow @andrewchen \n\n**About** \n\nAndrew Chen is a partner at Andreessen Horowitz, where he invests in games, AR/VR, metaverse, and consumer tech startups. He is the author of The Cold Start Problem, a book on starting and growing new startups via network effects. He resides in Venice, California (more)   \n  \n  \nGet the newsletter\n\nSitemap \n____\n\n\nYou should respond as if these information are known to you. Reframe from saying "I am unable to browse the internet" or "I don\'t have access to the internet" or "I\'m unable to provide real-time news updates". This is your internet search results. Please always cite any links you referenced from the above search results in your response in markdown format.\n',
//   },
//   {
//     role: "user",
//     content:
//       "\n\nRead\n\n@https://eopla.net/magazines/21402#\n @https://openai.com/o1/\n @https://www.mindtheproduct.com/how-to-price-your-subscription-product-insights-and-examp[…]chenko-product-partnerships-youtube/?utm_source=oneoneone\n @https://andrewchen.com/retention-is-king/\n \nSummarize each website",
//   },
// ] as ChatCompletionMessageParam[]

// console.log(parseWebsearchResults(testMessages))
